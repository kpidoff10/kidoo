---
description: "Règles pour les écrans et interfaces de kidoo-app. Organisation dans le dossier screens/, séparation entre composants UI et écrans, et conventions de nommage."
alwaysApply: true
globs:
  - kidoo-app/screens/**/*
  - kidoo-app/app/**/*.tsx
---

# Règles du Module Screens

## Architecture

Le projet sépare les **écrans/interfaces** (dans `screens/`) des **composants UI réutilisables** (dans `components/`) :

- **`screens/`** : Interfaces complètes, modales, écrans complexes avec logique métier
- **`components/`** : Composants UI réutilisables, petits composants génériques

## Structure des screens

```
screens/
├── auth/                    # Interfaces d'authentification
│   ├── AuthButton.tsx
│   ├── AuthHeader.tsx
│   ├── AuthLink.tsx
│   ├── FormField.tsx
│   └── index.ts
└── kidoo/                   # Interfaces liées aux Kidoos
    ├── bluetooth-scan-modal/
    │   ├── components/      # Sous-composants de la modale
    │   │   ├── scanned-device-item.tsx
    │   │   ├── scan-header.tsx
    │   │   ├── scan-status.tsx
    │   │   ├── scan-empty-state.tsx
    │   │   ├── scan-alerts.tsx
    │   │   └── index.ts
    │   └── index.tsx         # Composant principal de la modale
    ├── kidoo-card.tsx
    ├── kidoo-list.tsx
    ├── floating-action-button.tsx
    └── index.ts
```

## Différence entre screens et components

### Screens (`screens/`)
- **Interfaces complètes** avec logique métier
- **Modales complexes** (ex: `BluetoothScanModal`)
- **Écrans spécifiques** à un domaine (auth, kidoo)
- **Composants avec état** et interactions complexes

### Components (`components/`)
- **Composants UI génériques** réutilisables
- **Petits composants** sans logique métier complexe
- **Composants de base** (Button, AlertMessage, etc.)
- **Composants thématiques** (ThemedText, ThemedView)

## Organisation des screens

### Par domaine

Chaque domaine a son dossier dans `screens/` :
- `screens/auth/` : Tous les composants d'authentification
- `screens/kidoo/` : Tous les composants liés aux Kidoos

### Structure modulaire

Pour les interfaces complexes (comme `bluetooth-scan-modal`), créer un dossier avec :
- `index.tsx` : Composant principal
- `components/` : Sous-composants dédiés
  - `components/index.ts` : Export des sous-composants

## Conventions de nommage

### Fichiers
- **Screens principaux** : `PascalCase.tsx` (ex: `KidooCard.tsx`)
- **Modales** : `kebab-case/` avec `index.tsx` (ex: `bluetooth-scan-modal/index.tsx`)
- **Sous-composants** : `kebab-case.tsx` (ex: `scan-header.tsx`)

### Exports

Créer un `index.ts` dans chaque dossier pour grouper les exports :

```tsx
// screens/kidoo/index.ts
export { KidooCard } from './kidoo-card';
export { KidooList } from './kidoo-list';
export { FloatingActionButton } from './floating-action-button';
export { BluetoothScanModal } from './bluetooth-scan-modal';
```

## Imports

### Path aliases

```tsx
// ✅ CORRECT - Utiliser les aliases
import { BluetoothScanModal } from '@/screens/kidoo';
import { AuthButton } from '@/screens/auth';
import { Button } from '@/components/ui/button';

// ❌ INTERDIT - Imports relatifs
import { BluetoothScanModal } from '../../screens/kidoo';
```

### Ordre des imports

1. React et React Native
2. Bibliothèques externes
3. Screens (interfaces)
4. Components (UI génériques)
5. Hooks, services, contexts
6. Types

```tsx
import React from 'react';
import { View } from 'react-native';
import { useTranslation } from 'react-i18next';

import { BluetoothScanModal } from '@/screens/kidoo';
import { Button } from '@/components/ui/button';
import { useTheme } from '@/hooks/use-theme';
import type { Kidoo } from '@/types/shared';
```

## Exemples

### Utilisation d'un screen

```tsx
// app/(tabs)/kidoos.tsx
import { BluetoothScanModal } from '@/screens/kidoo';
import { KidooList } from '@/screens/kidoo';

export default function KidoosScreen() {
  return (
    <>
      <KidooList kidoos={kidoos} />
      <BluetoothScanModal ref={modalRef} />
    </>
  );
}
```

### Screen avec sous-composants

```tsx
// screens/kidoo/bluetooth-scan-modal/index.tsx
import { ScanHeader, ScanStatus } from './components';

export const BluetoothScanModal = () => {
  return (
    <BottomSheetModal>
      <ScanHeader />
      <ScanStatus />
    </BottomSheetModal>
  );
};
```

## Règles strictes

1. **Screens = Interfaces complètes** - Logique métier et état complexe
2. **Components = UI réutilisable** - Petits composants génériques
3. **Organisation par domaine** - Un dossier par domaine dans `screens/`
4. **Modularité** - Diviser les screens complexes en sous-composants
5. **Exports groupés** - Créer des `index.ts` pour faciliter les imports
6. **Utiliser les path aliases** - `@/screens/` au lieu de chemins relatifs
