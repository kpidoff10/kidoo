---
description: "Règles d'internationalisation pour kidoo-app. JAMAIS de texte hardcodé, toujours utiliser t() ou Trans pour tous les textes affichés à l'utilisateur."
alwaysApply: false
globs:
  - kidoo-app/i18n/**/*
  - kidoo-app/app/**/*.tsx
  - kidoo-app/components/**/*.tsx
---

# Règles du Module Internationalisation (i18n)

## Principe fondamental

**JAMAIS de texte hardcodé en français ou anglais dans les composants.** Tous les textes doivent passer par le système de traduction.

## Structure

```
i18n/
├── config.ts          # Configuration i18n
├── types.d.ts         # Types TypeScript pour autocomplétion
└── locales/
    ├── fr.json        # Traductions françaises
    └── en.json        # Traductions anglaises
```

## Utilisation

### Hook useTranslation

```tsx
import { useTranslation } from 'react-i18next';

function MonComposant() {
  const { t } = useTranslation();
  
  // ✅ CORRECT
  return <Text>{t('common.welcome')}</Text>;
  
  // ❌ INTERDIT
  return <Text>Bienvenue</Text>;
}
```

### Composant Trans pour textes formatés

Pour les textes avec éléments React ou variables :

```tsx
import { Trans } from 'react-i18next';
import { ThemedText } from '@/components/themed-text';

<ThemedText>
  <Trans
    i18nKey="home.step1.description"
    values={{ shortcut: 'cmd + d' }}
    components={{
      1: <ThemedText type="defaultSemiBold" />,
      2: <ThemedText type="defaultSemiBold" />,
    }}
  />
</ThemedText>
```

Dans `locales/fr.json` :
```json
{
  "home": {
    "step1": {
      "description": "Appuyez sur <1>app/(tabs)/index.tsx</1> et <2>{{shortcut}}</2> pour..."
    }
  }
}
```

## Organisation des clés

Organiser les clés par domaine :

```json
{
  "common": {
    "cancel": "Annuler",
    "confirm": "Confirmer",
    "error": "Erreur",
    "close": "Fermer"
  },
  "auth": {
    "login": {
      "title": "Connexion",
      "subtitle": "Connectez-vous à votre compte",
      "email": "Email",
      "password": "Mot de passe"
    },
    "register": {
      "title": "Inscription",
      "subtitle": "Créez votre compte"
    }
  },
  "kidoos": {
    "title": "Mes Kidoos",
    "empty": {
      "title": "Aucun Kidoo",
      "description": "Ajoutez votre premier appareil"
    }
  }
}
```

## Ajout de nouvelles traductions

1. **Ajouter dans les deux fichiers** (`fr.json` et `en.json`)
2. **Utiliser la même structure** pour les deux langues
3. **Utiliser des clés descriptives** (ex: `auth.login.title` plutôt que `title1`)
4. **Grouper par domaine** (auth, kidoos, common, etc.)

## Valeurs par défaut

Vous pouvez fournir une valeur par défaut :

```tsx
t('kidoos.scan.title', 'Recherche de Kidoo')
```

Mais **préférez toujours ajouter la clé** dans les fichiers JSON.

## Règles strictes

1. **JAMAIS de texte hardcodé** - Même pour les messages d'erreur
2. **Toujours utiliser `t()` ou `<Trans>`** - Pas de strings directes
3. **Ajouter les deux langues** - fr.json ET en.json
4. **Utiliser des clés descriptives** - `auth.login.title` plutôt que `title1`
5. **Grouper par domaine** - Organiser logiquement les clés

## Exceptions

Les seules exceptions autorisées sont :
- Noms de variables techniques (ex: `deviceId`, `macAddress`)
- Valeurs de configuration (ex: URLs, IDs)
- Logs de debug (console.log)

Mais même pour les logs, préférez les traduire si affichés à l'utilisateur.
